# Maintainer: Gerard Ribugent <ribugent@gmail.com>
pkgname=python-dbx
pkgver=0.4.1
pkgrel=1
pkgdesc="DataBricks CLI eXtensions - aka dbx is a CLI tool for advanced Databricks jobs management."
arch=(any)
url="https://docs.databricks.com/dev-tools/dbx.html"
license=('CUSTOM')
depends=(
	'python>=3.8'
	"python-databricks-cli>=0.16.4",
	"python-click>=7.1.2",
	"python-retry>=0.9.2",
	"python-requests>=2.24.0",
	"python-mlflow>=1.23.0",
	"python-scipy>=1.8.0",
	"python-tqdm>=4.50.0",
	"azure-identity>=1.7.1", # Missing in AUR
	"azure-mgmt-datafactory>=2.2.0",  # Missing in AUR
	"azure-mgmt-subscription>=3.0.0", # Missing in AUR
	"python-ruamel-yaml>=0.17.10",
	"python-cryptography>=3.3.1", "python-cryptography<38.0.0"
	"python-emoji>=1.6.1",
	"python-cookiecutter>=1.7.2",
	"python-jinja>=2.11.2",
)
makedepends=(python-setuptools)
source=($pkgname-$pkgver.tar.gz::https://github.com/DataDog/datadogpy/archive/refs/tags/v$pkgver.tar.gz)
sha512sums=('4eee789f6582cdee2e39491a141e8716d20bbee68475ad38a8b311481929b4c0996b53ea19636e0988bb554b1a4451ac95eefa4ee3e005726e7da111cb9d4960')

build() {
	cd "$pkgname-$pkgver"
}

package() {
	cd "$pkgname-$pkgver"
	/usr/bin/python setup.py install --root="$pkgdir/"
	install -Dm0644 LICENSE.txt "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
}
